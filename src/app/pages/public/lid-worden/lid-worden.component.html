<div class="splash-image"></div>

<div class="container mat-elevation-z2">
  <div class="display-1 justify-content-center" style="text-align: center">
    Lid worden
  </div>
  <mat-divider class="divider" style="margin-bottom: 1rem"></mat-divider>
  @defer (when !!content1() && !!content2() && !!content3()) {
  <div class="row">
    <div class="col-lg-2 col-12">
      @if(!!img_1){
      <div class="image-wrapper">
        <img
          alt="lid worden image"
          class="card-image"
          [ngSrc]="getImageUrl(collectionId, recordId, img_1)"
          priority
          width="400"
          height="280"
        />
      </div>
      } @else {
      <img
        alt="lid worden image"
        class="card-image"
        src="/assets/Place-Holder-Image.jpg"
      />
      }
    </div>
    <div class="col-lg-9 col-12 pt-4" [innerHTML]="content1()"></div>
    <div class="col-lg-1 col-12" style="align-items: center">
      <button
        mat-fab
        matTooltip="Scoll naar Formulier"
        aria-label="Scroll naar Formulier"
        color="primary"
        onClick="document.getElementById('scrollPoint').scrollIntoView({ block: 'start',  behavior: 'smooth'});"
      >
        <mat-icon>keyboard_double_arrow_down</mat-icon>
      </button>
    </div>
  </div>
  <div class="row pt-4">
    <div class="col-lg-8 col-12" [innerHTML]="content2()"></div>
    <div class="col-lg-4 col-12">
      @if(!!img_2){

      <div class="image-wrapper">
        <img
          alt="lid worden image"
          class="card-image"
          [ngSrc]="getImageUrl(collectionId, recordId, img_2)"
          priority
          width="600"
          height="280"
        />
      </div>
      } @else {
      <img
        alt="lid worden image"
        class="card-image"
        src="/assets/Place-Holder-Image.jpg"
      />
      }
    </div>
  </div>
  <div class="row pt-4">
    <div class="col-lg-3 col-12">
      @if(!!img_3){
      <div class="image-wrapper">
        <img
          alt="lid worden image"
          class="card-image"
          [ngSrc]="getImageUrl(collectionId, recordId, img_3)"
          priority
          width="420"
          height="280"
        />
      </div>
      } @else {
      <img
        alt="lid worden image"
        class="card-image"
        src="/assets/Place-Holder-Image.jpg"
        style="
          object-fit: contain;
          max-width: 100%;
          border-radius: 1em;
          align-content: center;
        "
      />
      }
    </div>
    <div class="col-lg-9 col-12 pt-2" [innerHTML]="content3()"></div>
  </div>
  } @placeholder (minimum 1s) {
  <div class="center">
    <mat-spinner></mat-spinner>
  </div>
  }
</div>
<div id="scrollPoint" style="scroll-margin-top: 4em"></div>
<div class="container mat-elevation-z2" style="margin-top: 2em">
  <div class="col-12 d-flex justify-content-center">
    <div class="titel">
      <h1 style="display: flex; align-items: center; gap: 0.5rem">
        <mat-icon>person_add</mat-icon>
        Schrijf je nu in!
      </h1>
    </div>
  </div>
  <div class="row">
    <mat-form-field class="col-md-4 col-12">
      <mat-label>Voornaam</mat-label>
      <input
        placeholder="Pieter"
        matInput
        type="text"
        required
        [(ngModel)]="voornaam"
      />
    </mat-form-field>
    <mat-form-field class="col-md-4 col-12">
      <mat-label>Achternaam</mat-label>
      <input
        placeholder="Post"
        matInput
        type="text"
        required
        [(ngModel)]="achternaam"
      />
    </mat-form-field>
    <mat-form-field class="col-md-4 col-12">
      <mat-label>Geboortedatum</mat-label>
      <input
        matInput
        [matDatepicker]="picker1"
        [(ngModel)]="geboorteDatum"
        required
        name="picker1"
      />
      <mat-datepicker-toggle
        matIconSuffix
        [for]="picker1"
      ></mat-datepicker-toggle>
      <mat-datepicker #picker1></mat-datepicker>
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field class="col-md-8 col-12">
      <mat-label>E-mail</mat-label>
      <input
        placeholder="pieter-post@voorbeeld.nl"
        matInput
        type="email"
        required
        [(ngModel)]="email"
      />
    </mat-form-field>

    <mat-form-field class="col-md-4 col-12">
      <mat-label>Groep</mat-label>
      <mat-select [(value)]="selectedGroep" required>
        @for (groep of groepen(); track $index) {
        <mat-option [value]="groep.id">{{ groep.naam }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>

  <div class="d-flex">
    <mat-form-field class="flex">
      <mat-label>Bericht</mat-label>
      <textarea
        [(ngModel)]="message"
        matInput
        rows="10"
        required
        placeholder="Typ hier je bericht"
      ></textarea>
    </mat-form-field>
  </div>
  <div class="d-flex">
    <span
      [matTooltip]="
        loading() || !formIsValid()
          ? 'Vul het formulier in om te verzenden'
          : ''
      "
      [matTooltipDisabled]="!(loading() || !formIsValid())"
      style="display: flex; flex: 1"
    >
      <button
        class="flex"
        mat-flat-button
        (click)="submit()"
        [disabled]="loading() || !formIsValid()"
      >
        Verzenden
      </button>
    </span>
  </div>
</div>
