<div
  class="container d-flex align-items-center justify-content-center min-vh-100"
>
  <div class="row justify-content-center w-100">
    <div class="col-xl-6 col-12">
      <mat-card class="flex flex-grow-1">
        <mat-card-header>
          <mat-card-title-group>
            <mat-card-title> Account Aanmaken </mat-card-title>
          </mat-card-title-group>
        </mat-card-header>
        <mat-card-content class="mt-2 row gap-4">
          <form
            (submit)="signup($event)"
            class="col-md-6 col-12 w-100 d-flex flex-column gap-2"
          >
            <mat-form-field>
              <mat-label>Gebruikersnaam</mat-label>
              <input
                matInput
                required
                type="text"
                [value]="username()"
                (input)="username.set($any($event.target).value)"
                [class.mat-input-invalid]="
                  username().length > 0 && !usernameValid()
                "
              />
              @if (username().length > 0 && !usernameValid()) {
              <mat-error>
                Gebruikersnaam mag alleen letters, cijfers, underscores en
                streepjes bevatten
              </mat-error>
              } @if (username().length > 0 && usernameValid()) {
              <mat-hint class="mat-hint-success">
                Gebruikersnaam is geldig
              </mat-hint>
              } @if (username().length === 0) {
              <mat-hint
                >Alleen letters, cijfers, _ en - zijn toegestaan</mat-hint
              >
              }
            </mat-form-field>
            <mat-form-field>
              <mat-label>E-mail</mat-label>
              <input
                matInput
                required
                type="email"
                [value]="email()"
                (input)="email.set($any($event.target).value)"
                [class.mat-input-invalid]="email().length > 0 && !emailValid()"
              />
              @if (email().length > 0 && !emailValid()) {
              <mat-error> Voer een geldig e-mailadres in </mat-error>
              } @if (email().length > 0 && emailValid()) {
              <mat-hint class="mat-hint-success">
                E-mailadres is geldig
              </mat-hint>
              }
            </mat-form-field>
            <mat-form-field>
              <mat-label>Naam</mat-label>
              <input
                matInput
                required
                type="text"
                [value]="name()"
                (input)="name.set($any($event.target).value)"
                [class.mat-input-invalid]="name().length > 0 && !nameValid()"
              />
              @if (name().length > 0 && !nameValid()) {
              <mat-error> Naam mag niet leeg zijn </mat-error>
              } @if (name().length > 0 && nameValid()) {
              <mat-hint class="mat-hint-success"> Naam is ingevuld </mat-hint>
              }
            </mat-form-field>
            <mat-form-field>
              <mat-label>Wachtwoord</mat-label>
              <input
                matInput
                required
                [type]="hidePassword() ? 'password' : 'text'"
                [value]="password()"
                (input)="password.set($any($event.target).value)"
                [class.mat-input-invalid]="
                  password().length > 0 && !passwordValid()
                "
              />
              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="hidePassword.set(!hidePassword())"
                [attr.aria-label]="
                  'Wachtwoord ' + (hidePassword() ? 'tonen' : 'verbergen')
                "
              >
                <mat-icon>{{
                  hidePassword() ? "visibility_off" : "visibility"
                }}</mat-icon>
              </button>
              @if (password().length > 0 && !passwordValid()) {
              <mat-error>
                Wachtwoord moet minimaal 8 tekens lang zijn
              </mat-error>
              } @if (password().length > 0 && passwordValid()) {
              <mat-hint class="mat-hint-success">
                Wachtwoord is geldig
              </mat-hint>
              } @if (password().length === 0) {
              <mat-hint> Minimaal 8 tekens </mat-hint>
              }
            </mat-form-field>
            <mat-form-field>
              <mat-label>Wachtwoord Bevestigen</mat-label>
              <input
                matInput
                required
                [type]="hidePasswordConfirm() ? 'password' : 'text'"
                [value]="passwordConfirm()"
                (input)="passwordConfirm.set($any($event.target).value)"
                [class.mat-input-invalid]="passwordsDoNotMatch()"
              />
              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="hidePasswordConfirm.set(!hidePasswordConfirm())"
                [attr.aria-label]="
                  'Wachtwoord bevestigen ' +
                  (hidePasswordConfirm() ? 'tonen' : 'verbergen')
                "
              >
                <mat-icon>{{
                  hidePasswordConfirm() ? "visibility_off" : "visibility"
                }}</mat-icon>
              </button>
              @if (passwordsDoNotMatch()) {
              <mat-error>
                De wachtwoorden komen niet overeen. Controleer beide velden.
              </mat-error>
              } @if (passwordsMatch()) {
              <mat-hint class="mat-hint-success">
                Wachtwoorden komen overeen
              </mat-hint>
              }
            </mat-form-field>
            <mat-card-actions>
              <button
                class="flex-grow-1"
                type="submit"
                color="primary"
                mat-flat-button
                [disabled]="!formIsValid() || loading()"
              >
                Account Aanmaken
              </button>
            </mat-card-actions>
          </form>
          <div
            class="col-md-6 col-12 w-100 d-flex flex-column gap-2 align-items-center justify-content-center"
          >
            <p>Al een account?</p>
            <a [routerLink]="['/login']" mat-flat-button color="accent"
              >Log in</a
            >
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
