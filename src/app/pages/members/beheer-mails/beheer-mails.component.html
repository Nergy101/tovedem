<div class="container">
  <div class="container">
    <div class="row">
      <p class="display-1">Emails</p>
    </div>

    <div class="row">
      <div class="row pt-4">
        @defer (when mailTemplates()) {

        <mat-card class="table-responsive table-width">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Naam</th>
                <th scope="col">Status</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              @for (mailTemplate of mailTemplates(); track $index) {
              <tr>
                <td>{{ mailTemplate.naam }}</td>
                <td>
                  <button
                    class="d-flex justify-content-center align-items-center"
                    mat-button
                    [matMenuTriggerFor]="menu"
                    [style]="{
                      'background-color': getLabelBackgroundColor(
                        mailTemplate.status
                      )
                    }"
                    style="color: white"
                  >
                    {{ getMailStatus(mailTemplate.status) }}
                  </button>
                  <mat-menu #menu="matMenu">
                    <button
                      mat-menu-item
                      (click)="updateMailStatus(mailTemplate, 'concept')"
                    >
                      Concept
                    </button>
                    <button
                      mat-menu-item
                      (click)="updateMailStatus(mailTemplate, 'inprogress')"
                    >
                      In Progress
                    </button>
                    <button
                      mat-menu-item
                      (click)="updateMailStatus(mailTemplate, 'done')"
                    >
                      Done
                    </button>
                    <button
                      mat-menu-item
                      (click)="updateMailStatus(mailTemplate, 'verified')"
                    >
                      Verified
                    </button>
                  </mat-menu>
                </td>
                <td>
                  <button
                    mat-icon-button
                    (click)="openEditDialog(mailTemplate)"
                    [disabled]="loading()"
                  >
                    <mat-icon>edit</mat-icon>
                  </button>
                </td>
              </tr>
              }
            </tbody>
          </table>
        </mat-card>
        } @placeholder {
        <div class="center">
          <mat-spinner></mat-spinner>
        </div>
        }
      </div>
    </div>
  </div>
</div>
