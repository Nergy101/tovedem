<div class="container mt-4">
  <div class="container">
    <div class="row align-items-center mb-4">
      <div class="col-auto">
        <button
          mat-icon-button
          (click)="goBack()"
          aria-label="Terug naar galerij"
        >
          <mat-icon>arrow_back</mat-icon>
        </button>
      </div>
      <div class="col">
        @if (folder()) {
        <p class="display-1 mb-0">{{ folder()!.naam }}</p>
        @if (folder()!.jaar) {
        <span class="year-badge">{{ folder()!.jaar }}</span>
        } }
      </div>
    </div>

    @if (canUpload()) {
    <div class="row my-4">
      <button mat-fab extended color="primary" (click)="openUploadDialog()">
        <mat-icon>add_circle</mat-icon>
        Foto's toevoegen
      </button>
    </div>
    }

    <mat-card class="gallery" appearance="outlined">
      @if (loading()) {
      <div class="center">
        <mat-spinner></mat-spinner>
      </div>
      } @else { @if (fotos().length === 0) {
      <div class="center empty-state">
        <mat-icon class="empty-icon">photo_library</mat-icon>
        <p>Nog geen foto's in deze folder</p>
        @if (canUpload()) {
        <button mat-stroked-button color="primary" (click)="openUploadDialog()">
          <mat-icon>add_photo_alternate</mat-icon>
          Eerste foto's toevoegen
        </button>
        }
      </div>
      } @else {
      <div class="grid">
        @for (photo of fotos(); track photo; let i = $index) {
        <mat-card appearance="outlined" class="photo-card">
          <img
            mat-card-image
            [src]="getPhotoUrl(photo, '200x200')"
            [alt]="'Foto ' + (i + 1)"
            loading="lazy"
          />
          <mat-card-actions>
            <button
              mat-icon-button
              (click)="openPhoto(photo)"
              aria-label="Bekijk foto in volledig scherm"
            >
              <mat-icon aria-hidden="true">visibility</mat-icon>
            </button>
            @if (canDelete()) {
            <button
              mat-icon-button
              (click)="deletePhoto(photo)"
              aria-label="Verwijder foto"
            >
              <mat-icon aria-hidden="true">delete</mat-icon>
            </button>
            }
          </mat-card-actions>
        </mat-card>
        }
      </div>
      } }
    </mat-card>
  </div>
</div>
